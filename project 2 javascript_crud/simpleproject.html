<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Feedback Form</title>
  <link
    href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css"
    rel="stylesheet"
  />
</head>
<body>
  <div class="container-fluid">
    <div class="row justify-content-center">
      <!-- On small devices, full width; on medium and up, 6 columns -->
      <div class="col-12 col-md-6">
        <h1 class="mb-4">Customer Feedback Form</h1>
        <form name="frm" action="#">
          <input type="hidden" name="userid" id="userid" />
          <div class="mb-3">
            <label class="form-label">Name</label>
            <input
              type="text"
              class="form-control"
              id="username"
              name="username"
            />
          </div>
          <div class="mb-3">
            <label class="form-label">Email address</label>
            <input
              type="text"
              class="form-control"
              id="email"
              name="email"
            />
          </div>
          <div class="mb-3">
            <label class="form-label">Event</label>
            <select class="form-select" id="event">
              <option value="">Select Event</option>
              <option value="Webinar">Webinar</option>
              <option value="Workshop">Workshop</option>
              <option value="Meetup">Meetup</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Rating</label>
            <select class="form-select" id="rating">
              <option value="">Rating</option>
              <option value="1">1</option>
              <option value="2">2</option>
              <option value="3">3</option>
              <option value="4">4</option>
              <option value="5">5</option>
            </select>
          </div>
          <div class="mb-3">
            <label class="form-label">Comment Here</label>
            <textarea
              class="form-control"
              id="comments"
              placeholder="Leave a comment here"
            ></textarea>
          </div>
          <div class="d-grid gap-2 col-12 col-sm-6 mx-auto">
            <button
              class="btn btn-primary"
              type="button"
              onclick="savefeedback()"
            >
              Save
            </button>
          </div>
        </form>
      </div>
    </div>

    <div class="table-responsive mt-5">
      <table class="table table-dark table-hover">
        <thead>
          <tr>
            <th>SR NO</th>
            <th>ID</th>
            <th>Name</th>
            <th>Email</th>
            <th>Event</th>
            <th>Rating</th>
            <th>Comments</th>
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="allusers"></tbody>
      </table>
    </div>
  </div>

  <script>
   // Save form data to localStorage
const savefeedback = () => {
  let name = document.getElementById("username").value;
  let email = document.getElementById("email").value;
  let event = document.getElementById("event").value;
  let rating = document.getElementById("rating").value;
  let comment = document.getElementById("comments").value;
  let userid = document.getElementById("userid").value;
  let alldata = JSON.parse(localStorage.getItem("UserData")) || [];
  let userData = [];
  if (userid !== "") {
    // Edit existing
    userData = alldata.map((i) => {
      if (i.id == userid) {
        i.name = name;
        i.email = email;
        i.event = event;
        i.rating = rating;
        i.comment = comment;
      }
      return i;
    });
  } else {
    // New entry
    let newId = alldata.length ? alldata[alldata.length - 1].id + 1 : 1;
    let obj = {
      id: newId,
      name: name,
      email: email,
      event: event,
      rating: rating,
      comment: comment
    };
    userData = alldata;
    userData.push(obj);
  }
  localStorage.setItem("UserData", JSON.stringify(userData));
  dispData();
  document.frm.reset();
  document.getElementById("userid").value = "";
};
const dispData = () => {
  let alldata = JSON.parse(localStorage.getItem("UserData")) || [];
  let tr = "";
  alldata.forEach((i, index) => {
    let srno = index + 1;
    tr += `<tr>
       <td>${srno}</td>
      <td>${i.id}</td>
      <td>${i.name}</td>
      <td>${i.email}</td>
      <td>${i.event}</td>
      <td>${i.rating}</td>
      <td>${i.comment}</td>
      <td>
        <button onClick="editData(${i.id})">Edit</button>
        <button onClick="delData(${i.id})">Delete</button>
      </td>
    </tr>`;
  });
  document.getElementById("allusers").innerHTML = tr;
};
const delData = (id) => {
  let alldata = JSON.parse(localStorage.getItem("UserData")) || [];
  let res = alldata.filter((i) => i.id != id);
  localStorage.setItem("UserData", JSON.stringify(res));
  dispData();
};
const editData = (id) => {
  let alldata = JSON.parse(localStorage.getItem("UserData")) || [];
  let res = alldata.find((i) => i.id == id);
  if (res) {
    document.getElementById("username").value = res.name;
    document.getElementById("email").value = res.email;
    document.getElementById("event").value = res.event;
    document.getElementById("rating").value = res.rating;
    document.getElementById("comments").value = res.comment;
    document.getElementById("userid").value = id;
  }
};
// Initial display
dispData();
   
  </script>
</body>
</html>
